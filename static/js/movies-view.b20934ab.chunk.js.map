{"version":3,"file":"static/js/movies-view.b20934ab.chunk.js","mappings":"sSAAMA,EAAU,mCAAhB,SAEeC,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,WAAAA,SAAAA,IAAf,OAAeA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAf,2GAAsCC,EAAtC,+BAA4C,GAAIC,EAAhD,+BAAyD,GAAzD,SAC2BC,MAAMF,EAAKC,GADtC,YACUE,EADV,QAEoBC,GAFpB,iCAGgBD,EAASE,OAHzB,gDAIUC,QAAQC,OAAO,IAAIC,MAAM,cAJnC,2GAOO,SAASC,IACZ,OAAOV,EAAuB,2DAAD,OACkCD,IAG5D,SAASY,EAAkBC,GAC9B,OAAOZ,EAAuB,sCAAD,OACaY,EADb,oBACgCb,EADhC,oBAK1B,SAASc,EAAkBD,GAChC,OAAOZ,EAAuB,sCAAD,OACWY,EADX,4BACsCb,EADtC,oBAKxB,SAASe,EAAkBF,GAChC,OAAOZ,EAAuB,sCAAD,OACWY,EADX,4BACsCb,EADtC,oBAKxB,SAASgB,EAAiBC,GAC/B,OAAOhB,EAAuB,yDAAD,OACuBD,EADvB,iCACuDiB,EADvD,kC,0EC9BhB,SAASC,EAAeC,GACnC,OACIA,IACI,wBACKA,EAAKA,KAAKC,KAAI,YAA6B,IAA1BC,EAAyB,EAAzBA,GAAIC,EAAqB,EAArBA,eAClB,OACI,yBACI,SAAC,KAAD,CAAMC,GAAE,kBAAaF,GAArB,SAA4BC,KADvBD,U,2HCJlB,SAASG,IAAc,IAAD,EACnC,GAA4BC,EAAAA,EAAAA,UAAS,MAArC,eAAOC,EAAP,KAAeC,EAAf,KACMC,GAAWC,EAAAA,EAAAA,MACjB,GAA6BC,EAAAA,EAAAA,MAArBC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,OAEdC,EAAc,MAEY,WAC5B,IAAMC,EAAYC,OAAOC,eAAeC,QAAQ,aAC5CH,EAAUI,SAAS,YACrBL,EAAcC,EAAUK,MAAM,KAKlCC,IAEAC,EAAAA,EAAAA,YAAU,WACR,IAAMxB,EAAQe,EAAOO,MAAM,GACtBtB,IAGLD,EAAAA,EAAAA,IAAiBC,GAAOyB,KAAKf,KAC5B,CAACK,IAYJ,OACE,iCACE,kBAAMW,SAZW,SAAAC,GACnBA,EAAEC,iBACF,IAAM5B,EAAQ2B,EAAEE,cAAcC,SAAS9B,MAAM+B,MAAMC,OAC9ChC,IAGLW,EAAS,GAAD,OAAIG,EAAJ,mBAAuBd,IAC/BkB,OAAOC,eAAec,QAAQ,YAA9B,UAA8CnB,EAA9C,mBAAiEd,MAK/D,WACE,kBACEkC,KAAK,QACLC,aAAY,UAAEnB,SAAF,QAAiB,GAC7BoB,KAAK,UAEP,kBAAOA,KAAK,SAASL,MAAM,cAE5BtB,IAAU,SAAC,IAAD,CAAgBP,KAAMO,EAAO4B","sources":["API/API.js","components/MoviesLinkList/MoviesLinkList.jsx","pages/MoviesView/MoviesView.jsx"],"sourcesContent":["const API_KEY = 'f6b9004a74710edf774660656e9f2aad';\n\nasync function fetchWithErrorHandling(url = '', config = {}) {\n    const response = await fetch(url, config);\n    return response.ok\n        ? await response.json()\n        : Promise.reject(new Error('Not found'));\n}\n\nexport function fetchTrending() {\n    return fetchWithErrorHandling(\n        `https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}`);\n}\n\nexport function fetchMovieDetails(movieId) {\n    return fetchWithErrorHandling(\n        `https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=en-US`);\n   \n}\n\nexport function fetchMovieCredits(movieId) {\n  return fetchWithErrorHandling(\n    `https://api.themoviedb.org/3/movie/${movieId}/credits?api_key=${API_KEY}&language=en-US`\n  );\n}\n\nexport function fetchMovieReviews(movieId) {\n  return fetchWithErrorHandling(\n    `https://api.themoviedb.org/3/movie/${movieId}/reviews?api_key=${API_KEY}&language=en-US`\n  );\n}\n\nexport function fetchSearchMovie(query) {\n  return fetchWithErrorHandling(`\n  https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=en-US&query=${query}&page=1&include_adult=false`);\n}","import { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nexport default function MoviesLinkList(data) {\n    return (\n        data && (\n            <ul>\n                {data.data.map(({ id, original_title }) => {\n                    return (\n                        <li key={id}>\n                            <Link to={`/movies/${id}`}>{original_title}\n\n                                \n                            </Link>\n\n                        </li>\n                    );\n                }\n                )}\n            </ul>\n        )\n    );\n}\n\nMoviesLinkList.propTypes = {\n    data: PropTypes.arrayOf(\n        PropTypes.shape({\n            id: PropTypes.number.isRequired,\n            original_title: PropTypes.string.isRequired,\n        })\n    ),\n};","import { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { fetchSearchMovie } from '../../API/API';\nimport MoviesLinkList from '../../components/MoviesLinkList/MoviesLinkList';\n\nexport default function MoviesView() {\n  const [movies, setMovies] = useState(null);\n  const navigate = useNavigate();\n  const { pathname, search } = useLocation();\n\n  let searchQuery = null;\n\n  const setSearchQueryToValue = () => {\n    const prevRoute = window.sessionStorage.getItem('prevRoute');\n    if (prevRoute.includes('search')) {\n      searchQuery = prevRoute.slice(15);\n     \n    }\n  };\n\n  setSearchQueryToValue();\n\n  useEffect(() => {\n    const query = search.slice(8);\n    if (!query) {\n      return;\n    }\n    fetchSearchMovie(query).then(setMovies);\n  }, [search]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const query = e.currentTarget.elements.query.value.trim();\n    if (!query) {\n      return;\n    }\n    navigate(`${pathname}?search=${query}`);\n    window.sessionStorage.setItem('prevRoute', `${pathname}?search=${query}`);\n  };\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <input\n          name=\"query\"\n          defaultValue={searchQuery ?? ''}\n          type=\"text\"\n        ></input>\n        <input type=\"submit\" value=\"Search\" />\n      </form>\n      {movies && <MoviesLinkList data={movies.results} />}\n    </>\n  );\n}"],"names":["API_KEY","fetchWithErrorHandling","url","config","fetch","response","ok","json","Promise","reject","Error","fetchTrending","fetchMovieDetails","movieId","fetchMovieCredits","fetchMovieReviews","fetchSearchMovie","query","MoviesLinkList","data","map","id","original_title","to","MoviesView","useState","movies","setMovies","navigate","useNavigate","useLocation","pathname","search","searchQuery","prevRoute","window","sessionStorage","getItem","includes","slice","setSearchQueryToValue","useEffect","then","onSubmit","e","preventDefault","currentTarget","elements","value","trim","setItem","name","defaultValue","type","results"],"sourceRoot":""}